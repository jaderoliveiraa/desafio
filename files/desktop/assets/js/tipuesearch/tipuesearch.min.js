!function(e){e.fn.tipuesearch=function(t){var i=e.extend({show:7,newWindow:!1,showURL:!0,showTitleCount:!0,minimumLength:3,descriptiveWords:25,highlightTerms:!0,highlightEveryTerm:!1,mode:"static",liveDescription:"*",liveContent:"*",contentLocation:"tipuesearch/tipuesearch_content.json",debug:!1},t);return this.each(function(){function t(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function s(t,c){e("#tipue_search_content").hide(),e("#tipue_search_content").html('<div class="tipue_search_spinner"><div class="tipue_search_rect1"></div><div class="tipue_search_rect2"></div><div class="rect3"></div></div>'),e("#tipue_search_content").show();var h="",o=!1,p=!1,g=!0,l=0;found=[];var u=e("#tipue_search_input").val().toLowerCase();if(u=e.trim(u),(u.match('^"')&&u.match('"$')||u.match("^'")&&u.match("'$"))&&(g=!1),g){var _=u.split(" ");u="";for(var d=0;d<_.length;d++){for(var v=!0,f=0;f<tipuesearch_stop_words.length;f++)_[d]==tipuesearch_stop_words[f]&&(v=!1,p=!0);v&&(u=u+" "+_[d])}u=e.trim(u),_=u.split(" ")}else u=u.substring(1,u.length-1);if(u.length>=i.minimumLength){if(g){if(c){for(var w=u,d=0;d<_.length;d++)for(var f=0;f<tipuesearch_replace.words.length;f++)_[d]==tipuesearch_replace.words[f].word&&(u=u.replace(_[d],tipuesearch_replace.words[f].replace_with),o=!0);_=u.split(" ")}for(var m=u,d=0;d<_.length;d++)for(var f=0;f<tipuesearch_stem.words.length;f++)_[d]==tipuesearch_stem.words[f].word&&(m=m+" "+tipuesearch_stem.words[f].stem);_=m.split(" ");for(var d=0;d<a.pages.length;d++){for(var x=0,b=a.pages[d].text,f=0;f<_.length;f++){var E=new RegExp(_[f],"gi");if(-1!=a.pages[d].title.search(E)){var L=a.pages[d].title.match(E).length;x+=20*L}if(-1!=a.pages[d].text.search(E)){var L=a.pages[d].text.match(E).length;x+=20*L}if(i.highlightTerms){if(i.highlightEveryTerm)var R=new RegExp("("+_[f]+")","gi");else var R=new RegExp("("+_[f]+")","i");b=b.replace(R,'<span class="h01">$1</span>')}if(-1!=a.pages[d].tags.search(E)){var L=a.pages[d].tags.match(E).length;x+=10*L}if(-1!=a.pages[d].url.search(E),0!=x)for(var C=0;C<tipuesearch_weight.weight.length;C++)a.pages[d].url==tipuesearch_weight.weight[C].url&&(x+=tipuesearch_weight.weight[C].score);_[f].match("^-")&&(E=new RegExp(_[f].substring(1),"i"),(-1!=a.pages[d].title.search(E)||-1!=a.pages[d].text.search(E)||-1!=a.pages[d].tags.search(E))&&(x=0))}0!=x&&(found.push({score:x,title:a.pages[d].title,desc:b,url:a.pages[d].url,image:a.pages[d].image}),l++)}}else for(var d=0;d<a.pages.length;d++){var x=0,b=a.pages[d].text,E=new RegExp(u,"gi");if(-1!=a.pages[d].title.search(E)){var L=a.pages[d].title.match(E).length;x+=20*L}if(-1!=a.pages[d].text.search(E)){var L=a.pages[d].text.match(E).length;x+=20*L}if(i.highlightTerms){if(i.highlightEveryTerm)var R=new RegExp("("+u+")","gi");else var R=new RegExp("("+u+")","i");b=b.replace(R,'<span class="h01">$1</span>')}if(-1!=a.pages[d].tags.search(E)){var L=a.pages[d].tags.match(E).length;x+=10*L}if(-1!=a.pages[d].url.search(E)&&(x+=20),0!=x)for(var C=0;C<tipuesearch_weight.weight.length;C++)a.pages[d].url==tipuesearch_weight.weight[C].url&&(x+=tipuesearch_weight.weight[C].score);0!=x&&(found.push({score:x,title:a.pages[d].title,desc:b,url:a.pages[d].url,image:a.pages[d].image}),l++)}if(0!=l){if(i.showTitleCount&&0==r){var y=document.title;document.title="("+l+") "+y,r++}1==o&&(h+='<div id="tipue_search_warning">'+tipuesearch_string_2+" "+u+". "+tipuesearch_string_3+' <a id="tipue_search_replaced">'+w+"</a></div>"),1==l?h+='<div id="tipue_search_results_count">'+tipuesearch_string_4+"</div>":(c_c=l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),h+='<div id="tipue_search_results_count">Exibindo: '+c_c+" "+tipuesearch_string_5+"</div>"),found.sort(function(e,t){return t.score-e.score});for(var T=0,d=0;d<found.length;d++){if(T>=t&&T<i.show+t){if("undefined"!=typeof found[d].image&&(h+='<div class="tipue_search_content_image"><img src="'+found[d].image+'" alt="imagem '+found[d].title+'"></div>'),h+='<div class="tipue_search_content_title"><a href="'+found[d].url+'"'+n+">"+found[d].title+"</a></div>",i.debug&&(h+='<div class="tipue_search_content_debug">Score: '+found[d].score+"</div>"),i.showURL){var k=found[d].url.toLowerCase();0==k.indexOf("http://")&&(k=k.slice(7)),h+='<div class="tipue_search_content_url"><a href="'+found[d].url+'"'+n+">"+k+"</a></div>"}if(found[d].desc){var W=found[d].desc,$="",j=W.split(" ");if(j.length<i.descriptiveWords)$=W;else for(var f=0;f<i.descriptiveWords;f++)$+=j[f]+" ";$=e.trim($),"."!=$.charAt($.length-1)&&($+=" ..."),h+='<div class="tipue_search_content_text">'+$+"</div>"}}T++}if(l>i.show){var O=Math.ceil(l/i.show),S=t/i.show;if(h+='<div id="tipue_search_foot"><ul id="tipue_search_foot_boxes">',t>0&&(h+='<li><a class="tipue_search_foot_box" id="'+(t-i.show)+"_"+c+'">'+tipuesearch_string_6+"</a></li>"),2>=S){var D=O;O>3&&(D=3);for(var f=0;D>f;f++)h+=f==S?'<li class="current">'+(f+1)+"</li>":'<li><a class="tipue_search_foot_box" id="'+f*i.show+"_"+c+'">'+(f+1)+"</a></li>"}else{var D=S+2;D>O&&(D=O);for(var f=S-1;D>f;f++)h+=f==S?'<li class="current">'+(f+1)+"</li>":'<li><a class="tipue_search_foot_box" id="'+f*i.show+"_"+c+'">'+(f+1)+"</a></li>"}S+1!=O&&(h+='<li><a class="tipue_search_foot_box" id="'+(t+i.show)+"_"+c+'">'+tipuesearch_string_7+"</a></li>"),h+="</ul></div>"}}else h+='<div id="tipue_search_warning">'+tipuesearch_string_8+"</div>"}else p?h+='<div id="tipue_search_warning">'+tipuesearch_string_8+". "+tipuesearch_string_9+"</div>":(h+='<div id="tipue_search_warning">'+tipuesearch_string_10+"</div>",h+=1==i.minimumLength?'<div id="tipue_search_warning">'+tipuesearch_string_11+"</div>":'<div id="tipue_search_warning">'+tipuesearch_string_12+" "+i.minimumLength+" "+tipuesearch_string_13+"</div>");e("#tipue_search_content").hide(),e("#tipue_search_content").html(h),e("#tipue_search_content").slideDown(200),e("#tipue_search_replaced").click(function(){s(0,!1)}),e(".tipue_search_foot_box").click(function(){var t=e(this).attr("id"),i=t.split("_");s(parseInt(i[0]),i[1])})}var a={pages:[]};e.ajaxSetup({async:!1});var r=0;if("live"==i.mode)for(var c=0;c<tipuesearch_pages.length;c++)e.get(tipuesearch_pages[c]).done(function(t){var s=e(i.liveContent,t).text();s=s.replace(/\s+/g," ");var r=e(i.liveDescription,t).text();r=r.replace(/\s+/g," ");var n=t.toLowerCase().indexOf("<title>"),h=t.toLowerCase().indexOf("</title>",n+7);if(-1!=n&&-1!=h)var o=t.slice(n+7,h);else var o=tipuesearch_string_1;a.pages.push({title:o,text:r,tags:s,url:tipuesearch_pages[c]})});"json"==i.mode&&e.getJSON(i.contentLocation).done(function(t){a=e.extend({},t)}),"static"==i.mode&&(a=e.extend({},tipuesearch));var n="";i.newWindow&&(n=' target="_blank"'),t("q")&&(e("#tipue_search_input").val(t("q")),s(0,!0)),e(this).keyup(function(e){"13"==e.keyCode&&s(0,!0)})})}}(jQuery);