!function(e){var t=e.ajax,n=[],s=/=\?(&|$)/,o=(new Date).getTime();function r(t,n,s){(t.context?e(t.context):e.event).trigger(n,s)}function a(t,n){if(e.isFunction(t))return t(n);if(e.isFunction(t.url.test)){if(!t.url.test(n.url))return null}else{var s=t.url.indexOf("*");if(t.url!==n.url&&-1===s||!new RegExp(t.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".+")).test(n.url))return null}return t.data&&n.data&&!function t(n,s){var o=!1;return"string"==typeof s?e.isFunction(n.test)?n.test(s):n==s:(e.each(n,function(r,a){return void 0===s[r]?o=!1:(o=!0,"object"==typeof s[r]?t(n[r],s[r]):o=e.isFunction(n[r].test)?n[r].test(s[r]):n[r]==s[r])}),o)}(t.data,n.data)?null:t&&t.type&&t.type.toLowerCase()!=n.type.toLowerCase()?null:t}function i(t,n){var s=e.extend({},e.mockjaxSettings,t);s.log&&e.isFunction(s.log)&&s.log("MOCK "+n.type.toUpperCase()+": "+n.url,e.extend({},n))}function u(n,s,o){var r,a=(r=this,function(){return function(){this.status=n.status,this.statusText=n.statusText,this.readyState=4,e.isFunction(n.response)&&n.response(o),"json"==s.dataType&&"object"==typeof n.responseText?this.responseText=JSON.stringify(n.responseText):"xml"==s.dataType?"string"==typeof n.responseXML?this.responseXML=function(t){null==window.DOMParser&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t});try{var n=(new DOMParser).parseFromString(t,"text/xml");if(!e.isXMLDoc(n))throw"Unable to parse XML";if(1==e("parsererror",n).length)throw"Error: "+e(n).text()}catch(t){var s=null==t.name?t:t.name+": "+t.message;return void e(document).trigger("xmlParseError",[s])}return n}(n.responseXML):this.responseXML=n.responseXML:this.responseText=n.responseText,"number"!=typeof n.status&&"string"!=typeof n.status||(this.status=n.status),"string"==typeof n.statusText&&(this.statusText=n.statusText),e.isFunction(this.onreadystatechange)?(n.isTimeout&&(this.status=-1),this.onreadystatechange(n.isTimeout?"timeout":void 0)):n.isTimeout&&(this.status=-1)}.apply(r)});n.proxy?t({global:!1,url:n.proxy,type:n.proxyType,data:n.data,dataType:"script"===s.dataType?"text/plain":s.dataType,complete:function(e,t){n.responseXML=e.responseXML,n.responseText=e.responseText,n.status=e.status,n.statusText=e.statusText,this.responseTimer=setTimeout(a,n.responseTime||0)}}):!1===s.async?a():this.responseTimer=setTimeout(a,n.responseTime||50)}function l(t,n,s,o){return void 0===(t=e.extend(!0,{},e.mockjaxSettings,t)).headers&&(t.headers={}),t.contentType&&(t.headers["content-type"]=t.contentType),{status:t.status,statusText:t.statusText,readyState:1,open:function(){},send:function(){o.fired=!0,u.call(this,t,n,s)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(e,n){t.headers[e]=n},getResponseHeader:function(e){return t.headers&&t.headers[e]?t.headers[e]:"last-modified"==e.toLowerCase()?t.lastModified||(new Date).toString():"etag"==e.toLowerCase()?t.etag||"":"content-type"==e.toLowerCase()?t.contentType||"text/plain":void 0},getAllResponseHeaders:function(){var n="";return e.each(t.headers,function(e,t){n+=e+": "+t+"\n"}),n}}}function p(t,n,r){if(function(e){"GET"===e.type.toUpperCase()?s.test(e.url)||(e.url+=(/\?/.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?"):e.data&&s.test(e.data)||(e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?")}(t),t.dataType="json",t.data&&s.test(t.data)||s.test(t.url)){!function(e,t){jsonp=e.jsonpCallback||"jsonp"+o++,e.data&&(e.data=(e.data+"").replace(s,"="+jsonp+"$1"));e.url=e.url.replace(s,"="+jsonp+"$1"),window[jsonp]=window[jsonp]||function(n){data=n,c(e,t),d(e,t),window[jsonp]=void 0;try{delete window[jsonp]}catch(e){}head&&head.removeChild(script)}}(t,n);var a=/^(\w+:)?\/\/([^\/?#]+)/.exec(t.url),i=a&&(a[1]&&a[1]!==location.protocol||a[2]!==location.host);if(t.dataType="script","GET"===t.type.toUpperCase()&&i){var u=function(t,n,s){var o=s&&s.context||t,r=null;n.response&&e.isFunction(n.response)?n.response(s):"object"==typeof n.responseText?e.globalEval("("+JSON.stringify(n.responseText)+")"):e.globalEval("("+n.responseText+")");c(t,n),d(t,n),e.Deferred&&(r=new e.Deferred,"object"==typeof n.responseText?r.resolveWith(o,[n.responseText]):r.resolveWith(o,[e.parseJSON(n.responseText)]));return r}(t,n,r);return u||!0}}return null}function c(e,t){e.success&&e.success.call(callbackContext,t.response?t.response.toString():t.responseText||"",status,{}),e.global&&r(e,"ajaxSuccess",[{},e])}function d(t,n){t.complete&&t.complete.call(callbackContext,{},status),t.global&&r("ajaxComplete",[{},t]),t.global&&!--e.active&&e.event.trigger("ajaxStop")}function f(e,t){if(!(!e.url instanceof RegExp)&&e.hasOwnProperty("urlParams")){var n=e.url.exec(t.url);if(1!==n.length){n.shift();for(var s=0,o=n.length,r=e.urlParams.length,a=Math.min(o,r),i={};s<a;s++){i[e.urlParams[s]]=n[s]}t.urlParams=i}}}e.extend({ajax:function(s,o){var r,u,c;"object"==typeof s?(o=s,s=void 0):o.url=s,u=e.extend(!0,{},e.ajaxSettings,o);for(var d=0;d<n.length;d++)if(n[d]&&(c=a(n[d],u)))return i(c,u),"jsonp"===u.dataType&&(r=p(u,c,o))?r:(c.cache=u.cache,c.timeout=u.timeout,c.global=u.global,f(c,o),function(n,s,o,a){r=t.call(e,e.extend(!0,{},o,{xhr:function(){return l(n,s,o,a)}}))}(c,u,o,n[d]),r);return t.apply(e,[o])}}),e.mockjaxSettings={log:function(e){if(window.console&&window.console.log){if(!Function.prototype.bind)return void console.log(Array.prototype.slice.call(arguments).join(", "));Function.prototype.bind.call(console.log,console).apply(console,arguments)}},status:200,statusText:"OK",responseTime:500,isTimeout:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}},e.mockjax=function(e){var t=n.length;return n[t]=e,t},e.mockjaxClear=function(e){1==arguments.length?n[e]=null:n=[]},e.mockjax.handler=function(e){if(1==arguments.length)return n[e]}}(jQuery);
