var _base_url_=$(".base_url").val(),_body_=$("body");function newInscricao(e,a,o){_body_.find(".loading").fadeIn();var t=_base_url_+"../ava/controle.php?new_inscricao=true",s={cid:e,plano:a,carga_horaria:o};app.request(t,"post",s,"json","false",function(e){_body_.find(".loading").fadeOut(),"true"==e.success?"true"==e.carrinho?window.location.href=_base_url_+"../ava/carrinho-de-compras":window.location.href=_base_url_+"../ava/"+e.link:alert(e.message)},!1)}$(function(){$("#telefone").keypress(function(e){if(8!=e.which&&0!=e.which&&(e.which<48||e.which>57))return!1}),_body_.find(".loading").fadeOut(),$("form#newsletter").on("submit",function(e){e.preventDefault();var a=$(this);valida_email(a.find(".email").val())?$.ajax({url:_base_url_+"newsletter",type:"POST",data:{email:a.find(".email").val()},dataType:"json",success:function(e){"success"==e.status&&(alert("E-mail adicionado a nossa lista de novidades."),a.find(".email").val(""))},error:function(){alert("Problema na solicitação")},fail:function(){alert("Ocorreu uma falha na solitação.")}}):alert("Informe um e-mail válido.")}),$("form#newsletterCustom").on("submit",function(e){e.preventDefault();var a=$(this);valida_email(a.find(".email").val())?$.ajax({url:a.attr("action"),type:"POST",data:a.serialize(),dataType:"json",success:function(e){"success"==e.status&&(alert("Contato adicionado."),a.find("input").val(""))},error:function(){alert("Problema na solicitação")},fail:function(){alert("Ocorreu uma falha na solitação.")}}):alert("Informe um e-mail válido.")}),$(".more-description").on("click",function(){$(".description").toggleClass("limited"),$(".description").hasClass("limited")?$(".more-description").html('Ler mais <i class="ion ion-ios-arrow-thin-down"></i>'):$(".more-description").html('Esconder texto <i class="ion ion-ios-arrow-thin-up"></i>')});var e=6;$(".loadMoreCourses").on("click",function(){var a=$(this);app.request(_base_url_+"cursos/loadCoursesOnDemand/"+e,"get",{},"json",!1,function(o){if(o.length>0){e+=6;var t="";$.each(o,function(e,a){t+="<tr onclick=\"window.location.href = '"+_base_url_+"cursos/informacoes/"+a.id_curso+"'; \">",t+="  <td>",t+='      <a href="'+_base_url_+"cursos/informacoes/"+a.id_curso+'">',t+="          "+a.nome,t+='<div style="margin-top:5%;"><span class="badge badge-warning" style="background-color: #ffc207;">'+parseInt(a.desconto).toFixed(0)+'% de desconto</span> <span style="text-decoration:line-through; float:right;"><span style="font-size:10px;">de:</span> R$ '+parseFloat(a.investimento).toFixed(2)+"</span></div>","1"==a.lancamento&&(t+='      <br><span class="label label-success">CURSO NOVO</span>'),t+="      </a>",t+="  </td>",t+="  <td>",t+='      <a href="'+_base_url_+"cursos/informacoes/"+a.id_curso+'">',t+="          "+a.carga_horaria,t+='<div style="margin-top:5%;"><span style="text-transform: none;color:#027BFF;"><span style="font-size:10px; color:#6D757D;">por:</span> R$ '+parseFloat(a.investimento-a.desconto/100*a.investimento).toFixed(2)+"</span></div>",t+="      </a>",t+="  </td>",t+="</tr>"}),_body_.find(".list-cursos").append(t)}else a.remove()})}),$(".scrollTop").on("click",function(){$("html, body").animate({scrollTop:0})}),_body_.on("click","*[historyBack]",function(){window.history.back()}),_body_.on("focus","input.form-control",function(){$(this).parents(".form-group").find("label").addClass("active")}),_body_.on("blur","input.form-control",function(){var e=$(this);""==e.val()&&e.parents(".form-group").find("label").removeClass("active")}),_body_.on("click",".topHeader .menu .loadMenu, .bck-sidebar",function(e){e.preventDefault(),$("#sidebar").hasClass("open")?($(".bck-sidebar").fadeOut(),$("#sidebar").removeClass("open"),$("body").removeClass("open-aside")):($(".bck-sidebar").fadeIn(),$("#sidebar").addClass("open"),$("body").addClass("open-aside"))}),_body_.on("click",".topHeader .menu .loadSearch",function(e){e.preventDefault(),$(".topHeader .search").toggle()}),_body_.on("click","#sidebar ul li[closeMenu]",function(e){e.preventDefault(),$("#sidebar").removeClass("open"),$("body").removeClass("open-aside")}),_body_.on("change","[data-filter=true]",function(e){e.preventDefault();var a=$(this);""==a.val()?window.location.href=_base_url_+"cursos":window.location.href=_base_url_+"cursos?&ch="+a.val()}),_body_.on("keypress","input.input-search",function(e){if(13==e.which||13==e.keyCode)return $("form.form-search").submit(),!1}),_body_.on("submit","form.form-search",function(e){e.preventDefault();var a=$(".input-search").val();window.location.href=_base_url_+"cursos/search/"+a}),_body_.on("submit",".form-cadastro",function(e){e.preventDefault();var a=$(this),o=a.attr("action"),t=a.attr("method"),s=a.attr("redirect"),n=a.serialize();app.request(o,t,n,"json","false",function(e){if("true"==e.success){var a=$(".cid"),o=$(".plano"),t=$(".carga_horaria");a.length>0?newInscricao(a.val(),o.val(),t.val()):(alert("Usuário cadastrado com sucesso! Você será redirecionado"),window.location.href=s)}else alert(e.message)},!0)}),_body_.on("submit",".form-cadastro-whatsapp",function(e){e.preventDefault();var a=$(this),o=a.attr("action"),t=a.attr("method"),s=a.attr("redirect"),n=a.serialize();$("#loadingRequest").show(),app.request(o,t,n,"json","false",function(e){$("#cadastro-whatsapp-error").html(""),$("#cadastro-whatsapp-error").hide(),e&&"true"==e.success?($("#loadingRequest").hide(),alert("Usuário cadastrado com sucesso! Você receberá a senha de acesso no seu whatsapp!"),window.location.href=s):($("#loadingRequest").hide(),e.message&&(alert(e.message),$("#cadastro-whatsapp-error").show(),$("#cadastro-whatsapp-error").append(e.message)))},!0)}),_body_.on("submit",".form-login",function(e){e.preventDefault();var a=$(this),o=a.attr("action"),t=a.attr("method"),s=a.attr("redirect"),n=a.serialize();app.request(o,t,n,"json","false",function(e){if("true"==e.success){var a=$(".cid"),o=$(".plano"),t=$(".carga_horaria");a.length>0?newInscricao(a.val(),o.val(),t.val()):window.location.href=s}else alert(e.message),grecaptcha.reset(0)},!0)}),_body_.on("submit",".form-forgotPassword",function(e){e.preventDefault();var a=$(this),o=a.attr("action"),t=a.attr("method"),s=a.serialize();app.request(o,t,s,"json","false",function(e){"true"==e.success?alert("O link para cadastrar uma nova senha foi enviado para seu email."):alert(e.message),grecaptcha.reset(0)},!0)}),_body_.on("submit",".form-verificarAutenticidade",function(e){e.preventDefault();var a=$(this),o=a.attr("action"),t=a.attr("method"),s=a.serialize(),n=$("#certificado").val().split("-");n&&"999"==n[0]&&"GI"==n[1]?app.request("https://www.gintra.com.br/eventos/verificar_autenticidade/"+$("#certificado").val(),"GET","","json","false",function(e){"success"==e.status?(alert(e.message),a.find(".alertMsg .col-md-12").html('<div class="alert alert-success no-border-radius"><strong><i class="fa fa-check-circle"></i> Autenticidade verificada</strong><br><p> '+e.message+" </p></div>")):(alert(e.message),a.find(".alertMsg .col-md-12").html('<div class="alert alert-danger no-border-radius"><strong><i class="fa fa-warning"></i> Certificado não reconhecido</strong><br><p>'+e.message+"</p></div>"))},!0):app.request(o,t,s,"json","false",function(e){"success"==e.status?(alert(e.message),a.find(".alertMsg .col-md-12").html('<div class="alert alert-success no-border-radius"><strong><i class="fa fa-check-circle"></i> Autenticidade verificada</strong><br><p> '+e.message+" </p></div>")):(alert(e.message),a.find(".alertMsg .col-md-12").html('<div class="alert alert-danger no-border-radius"><strong><i class="fa fa-warning"></i> Certificado não reconhecido</strong><br><p>'+e.message+"</p></div>"))},!0)}),_body_.on("click",".btn-inscricao",function(){var e=$(this);"javaScript:void(0)"==e.attr("href")&&newInscricao(e.attr("data-id"),e.attr("data-plain"),e.attr("data-carga-horaria"))}),_body_.on("click",".btn-plano-vip",function(){var e=$(".form-dados-usuario").find("input[name='nome']").val(),a=$(".form-dados-usuario").find("input[name='telefone']").val(),o=$(".form-dados-usuario").find("textarea").val();if(""==e&&""==a&&""==o)return alert("Todos os campos devem ser preenchidos."),!1;$.ajax({url:$(".form-dados-usuario").attr("action"),dataType:"json",type:"POST",data:{from_name:"EAD - Enfermagem a Distância",from_email:"contato@enfermagemadistancia.com.br",to_name:"Contato",to_email:"layanne@intra-ead.com.br",subject:"[Plano VIP] Solicitação de contato",origem:"plano_vip",message:"                            <div>\n                                <h3>Um usuário solicitou ligação no plano VIP</h3>\n                                <br>\n                                <br>\n                            </div>\n                            <h4>Dados do Usuário</h4>\n                            <p> Nome: "+e+"</p>\n                            <p> Telefone: "+a+"</p>\n                            <p> Descrição: "+o+"</p>\n                        "},success:function(e){"success"==e.status&&(alert(e.message),$(".form-dados-usuario")[0].reset(),$("#modal-plano-vip").modal("hide"))}})})});var app={plugins:{modal:function(e){var a=$("#modal");app.request(e.url,e.type,e.data,e.dataType,!0,function(e){a.find(".modal-content").html(e),a.modal()})},notify:function(e){alert(e.text)}},request:function(e,a,o,t,s,n,r){return _body_.find(".loading").fadeIn(),$.ajax({url:e,type:a,data:o,dataType:t,async:s,success:function(e){_body_.find(".loading").fadeOut(),void 0!==n&&n(e)},fail:function(){app.plugins.notify({title:"Falha na solicitação",text:"Acorreu uma falha inesperada ao tentar processar esta solicitação",type:"error"})},error:function(){app.plugins.notify({title:"Falha na solicitação",text:"Acorreu algo inesperado ao tentar processar esta solicitação",type:"error"})}})}};function valida_email(e){return!!/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e)}function number_format(e,a,o,t){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var s=isFinite(+e)?+e:0,n=isFinite(+a)?Math.abs(a):0,r=void 0===t?",":t,i=void 0===o?".":o,c="";return(c=(n?function(e,a){var o=Math.pow(10,a);return""+(Math.round(e*o)/o).toFixed(a)}(s,n):""+Math.round(s)).split("."))[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(c[1]||"").length<n&&(c[1]=c[1]||"",c[1]+=new Array(n-c[1].length+1).join("0")),c.join(i)}const togglePassword=document.querySelector("#togglePassword"),showPassword=document.querySelector("#password");togglePassword&&showPassword&&togglePassword.addEventListener("click",function(e){const a="password"===showPassword.getAttribute("type")?"text":"password";showPassword.setAttribute("type",a),this.classList.toggle("fa-eye-slash")}),$("form#generic-post").length>0&&$("form#generic-post").on("submit",function(e){e.preventDefault();var a=$(this);a.find(".message").slideUp(200).html(""),$.ajax({url:a.attr("action"),type:"POST",data:$(this).serialize(),dataType:"json",success:function(e){"true"==e.success?void 0!==e.message&&e.message?(a.find(".message").html('<span class="text-success" style="font-weight: 800;">'+e.message+".</span>").slideDown(200),"undefined"!=typeof pnotify?pnotify("Sucesso!",e.message,"success"):alert(e.message)):(a.find(".message").html('<span class="text-success" style="font-weight: 800;">Sucesso!</span>').slideDown(200),"undefined"!=typeof pnotify?pnotify("Sucesso!","Sucesso!","success"):alert("Sucesso!")):void 0!==e.message&&e.message?(a.find(".message").html('<span class="text-danger" style="font-weight: 800;">'+e.message+"</span>").slideDown(200),"undefined"!=typeof pnotify?pnotify("Erro!",e.message,"error"):alert(e.message)):(a.find(".message").html('<span class="text-danger" style="font-weight: 800;"> Error! </span>').slideDown(200),"undefined"!=typeof pnotify?pnotify("Erro!","Erro!","error"):alert("Erro!")),"undefined"!=typeof grecaptcha&&grecaptcha.reset(0),void 0!==e.url_redirect&&e.url_redirect&&(a.find(".message").html('<span class="text-success" style="font-weight: 800;">Você será redirecionado em 5 segundos...</span>').slideDown(200),"undefined"!=typeof pnotify?pnotify("Sucesso!","Você será redirecionado em 5 segundos...","success"):alert("Você será redirecionado em 5 segundos..."),window.setTimeout(function(){window.location.href=e.url_redirect},5e3))},error:function(){a.find(".message").html('<span class="text-danger" style="font-weight: 800;">Problema na solicitação, atualize a página e tente novamente!</span>').slideDown(200),"undefined"!=typeof pnotify?pnotify("Erro!","Problema na solicitação, atualize a página e tente novamente!","error"):alert("Problema na solicitação, atualize a página e tente novamente!")},fail:function(){a.find(".message").html('<span class="text-danger" style="font-weight: 800;">Ocorreu uma falha na solitação, atualize a página e tente novamente!</span>').slideDown(200),"undefined"!=typeof pnotify?pnotify("Erro!","Ocorreu uma falha na solitação, atualize a página e tente novamente!","error"):alert("Ocorreu uma falha na solitação, atualize a página e tente novamente!")}})});
